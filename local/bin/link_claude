#!/bin/bash
# Links shared .claude config into current project directory

CLAUDE_SOURCE="$HOME/.dotfiles/claude/config"

if [[ ! -d "$CLAUDE_SOURCE" ]]; then
    echo "Error: $CLAUDE_SOURCE not found"
    exit 1
fi

if [[ -e ".claude" ]]; then
    echo ".claude already exists in $(pwd)"
    exit 1
fi

ln -s "$CLAUDE_SOURCE" .claude
echo "Linked .claude â†’ $CLAUDE_SOURCE"

# Add to .gitignore if not already there
if [[ -f .gitignore ]]; then
    grep -q "^\.claude$" .gitignore || echo ".claude" >> .gitignore
else
    echo ".claude" > .gitignore
fi
echo "Added .claude to .gitignore"