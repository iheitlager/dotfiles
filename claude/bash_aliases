#!/usr/bin/env bash
# Copyright 2026 Ilja Heitlager
# SPDX-License-Identifier: Apache-2.0


# launch-agents aliases
alias law='launch-agents workspace'
alias la2='launch-agents -n 2 --daemon start'
alias la3='launch-agents -n 3 start'
alias la4='launch-agents -n 4 start'
alias la6='launch-agents -n 6 start'
alias las='launch-agents stop'
alias lac='launch-agents --force clean'


# Send message to Claude agent pane
# Usage: agent-say 1 "do something"
agent-say() {
    local pane=$1
    shift
    local msg="$*"
    local session=$(tmux list-sessions -F "#{session_name}" | grep "^claude-" | head -1)
    tmux send-keys -t "$session:agents.$pane" "$msg" Enter
    tmux send-keys -t "$session:agents.$pane" Enter
}

# Unstick agent (just send Enter)
agent-poke() {
    local pane=$1
    local session=$(tmux list-sessions -F "#{session_name}" | grep "^claude-" | head -1)
    tmux send-keys -t "$session:agents.$pane" Enter
    tmux send-keys -t "$session:agents.$pane" Enter
}

# Broadcast to all agents
agent-broadcast() {
    local msg="$*"
    for i in 1 2 3 4; do
        agent-say $i "$msg"
        sleep 0.2
    done
}

agent-yes() {
    local pane=$1
    local session=$(tmux list-sessions -F "#{session_name}" | grep "^claude-" | head -1)
    tmux send-keys -t "$session:agents.$pane" Enter
    tmux send-keys -t "$session:agents.$pane" Enter
}

agent-always() {
    local pane=$1
    local session=$(tmux list-sessions -F "#{session_name}" | grep "^claude-" | head -1)
    tmux send-keys -t "$session:agents.$pane" Down Enter
    tmux send-keys -t "$session:agents.$pane" Enter
}

agent-no() {
    local pane=$1
    local session=$(tmux list-sessions -F "#{session_name}" | grep "^claude-" | head -1)
    tmux send-keys -t "$session:agents.$pane" Down Down Enter
    tmux send-keys -t "$session:agents.$pane" Enter
}


# One-shot AI queries (non-interactive)
# Usage: ai "explain this error"
alias ai='claude -p | mdcat'

# Quick AI helper without quotes
# Usage: ask what is the capital of France
ask() {
    claude -p "$*" | mdcat
}
